"use strict";var form=layui.form,laydate=layui.laydate;$(function(){$("#sortable").sortable(),$("#sortable").disableSelection()});var accessToken=sessionStorage.getItem("accessToken"),xhsdk=new Xhsdk(appID,appSecretKey);xhsdk.setGetaWayUrl(GetaWay_url),xhsdk.setToken(accessToken),xhsdk.setReqType("app"),xhsdk.setUserInfo(null),laydate.render({elem:"#date",type:"datetime"}),laydate.render({elem:"#date1",type:"datetime"}),$("#sortable .layui-form-item").each(function(e,a){$(this).attr("data-id",e)}),$(".ProgrammeList").on("click","li",function(){$(this).addClass("layui-this").siblings().removeClass("layui-this")});var i=2,delFlag=null;function addProject(e){var a='<div class="layui-form-item" data-id="'+i+++'">\n                                    <div class="layui-input-inline" >\n                                        <select name="quiz1">\n                                            <option value="" selected="" lay-verify="required">请选择</option>\n                                             <option value="DP" >DP</option>\n                                              <option value="APP">APP</option>\n                                  \n                                        </select>\n                                    </div>\n                                    <div class="layui-input-inline">\n                                        <select name="quiz2">\n                                            <option value="" selected="" lay-verify="required">请选择</option>\n                                            <option value="执行">执行</option>\n                                            <option value="发布">发布</option>\n                                        </select>\n                                    </div>\n                                <div class="layui-input-inline" style="width:335px">\n                                        <input type="text" name="username" lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">\n                                    </div>\n                                <div class="box-del" onclick="delbox(this,'+(delFlag=1==e?1:2)+')"><i class="iconfont icon-icon"></i></div>\n                        </div>';1==e?$(a).appendTo(".box-change"):2==e&&$(a).appendTo(".box-change-back"),form.render()}function delbox(e,a){var t=[],n=[];2==a?($(".box-change-back .layui-form-item").each(function(e,a){n.push(e)}),n.length<=1?layer.msg("至少保留一项"):$(e).parent().remove()):($(".box-change .layui-form-item").each(function(e,a){t.push(e)}),t.length<=1?layer.msg("至少保留一项"):$(e).parent().remove())}function projectinfo(){var e={projectName:$("#project_Name").val(),projectCode:"8008208820",status:0,constructOrgan:"深圳星火电子",constructOrganLeader:$("#staffvalue").val(),projectDescription:$("#project_Background").val(),projectFile:$(".fileUrl").text(),createBy:"huangyuxuan",lastUpdateBy:"huangyuxuan",remark:"备注"};xhsdk.ajax({type:"POST",url:solution+"/projectinfo/save",contentType:"application/json",datatype:"json",data:JSON.stringify(e),success:function(e){layer.msg("新增成功!",{icon:1,time:600},function(){parent.location.reload()})},error:function(e,a){layer.msg("新增失败！")}})}form.on("submit(submitCheck)",function(e){return projectinfo(),!1});