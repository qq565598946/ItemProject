"use strict";var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)};!function(e,t,n){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=n():"function"==typeof define&&define.amd?define(n):t.layui&&e.define?e.define(["jquery"],function(e){e("formSelects",n())}):t.formSelects=n()}("undefined"==typeof layui?null:layui,window,function(){var A="xm-select",L="xm-select-parent",H="xm-select-input",E="xm-select--suffix",m="xm-select-this",D="xm-select-label",F="xm-select-search",N="xm-select-search-type",O="xm-select-skin",y="xm-dis-disabled",P="xm-select-dis",u="xm-select-temp",_="xm-select-radio",g="xm-select-linkage",V="xm-select-dl",p="xm-select-hide",U="xm-hide-input",M="xm-select-sj",B="xm-select-title",q="xm-form-select",d="xm-form-selected",h="xm-select-none",v="xm-select-empty",I="xm-input",W="xm-dl-input",x="xm-select-tips",b="xm-cz",o="xm-cz-group",z="请选择",J={},k={on:{},filter:{},maxTips:{}},Q={type:"get",header:{},first:!0,data:{},searchUrl:"",searchName:"keyword",searchVal:null,keyName:"name",keyVal:"value",keySel:"selected",keyDis:"disabled",keyChildren:"children",dataType:"",delay:500,beforeSuccess:null,success:null,error:null,beforeSearch:null,clearInput:!1},n=[{icon:"iconfont icon-quanxuan",name:"全选",click:function(e,t){t.selectAll(e,!0,!0)}},{icon:"iconfont icon-qingkong",name:"清空",click:function(e,t){t.removeAll(e,!0,!0)}},{icon:"iconfont icon-fanxuan",name:"反选",click:function(e,t){t.reverse(e,!0,!0)}},{icon:"iconfont icon-pifu",name:"换肤",click:function(e,t){t.skin(e)}}],X=window.$||window.layui&&window.layui.jquery,l=X(window),Y={},$=function(e){var i=this;this.config={name:null,max:null,maxTips:function(e,t,n){var a=X('[xid="'+i.config.name+'"]').prev().find("."+A);a.parents(".layui-form-item[pane]").length&&(a=a.parents(".layui-form-item[pane]")),a.attr("style","border-color: red !important"),setTimeout(function(){a.removeAttr("style")},300)},init:null,on:null,filter:function(e,t,n,a){return-1==n.name.indexOf(t)},clearid:-1,direction:"auto",height:null,isEmpty:!1,btns:[n[0],n[1],n[2]],searchType:0,create:function(e,t){return Date.now()},template:function(e,t,n,a){return e},showCount:0,isCreate:!1,placeholder:z},this.select=null,this.values=[],X.extend(!0,this.config,e)},e=function(){this.appender(),this.init(),this.on(),this.initVal(),this.onreset()};e.prototype.appender=function(){Array.prototype.map||(Array.prototype.map=function(e,t){var n,a,i,r=Object(this),o=r.length>>>0;for(t&&(n=t),a=new Array(o),i=0;i<o;){var l,s;i in r&&(l=r[i],s=e.call(n,l,i,r),a[i]=s),i++}return a}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,a;if(null==this)throw new TypeError("this is null or not defined");var i=Object(this),r=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(1<arguments.length&&(n=t),a=0;a<r;){var o;a in i&&(o=i[a],e.call(n,o,a,i)),a++}})},e.prototype.init=function(e){var j=this;X(e||"select["+A+"]").each(function(e,t){var n=X(t),a=n.attr(A),i=n.next(".layui-form-select"),r=t.disabled,o=n.attr("xm-select-max")-0,l=null!=n.attr(F),s=l?n.attr(F):null,c=null!=n.attr("xm-select-create"),d=null!=n.attr(_),f=n.attr(O),u=n.attr("xm-select-direction"),p=t.options[0],h=n.attr("xm-select-height"),v=n.attr("name"),m=n.attr("lay-verify"),y=n.attr("lay-verType"),g="dl"==n.attr(N)?1:0,x=n.attr("xm-select-show-count")-0,b=p?p.value?z:p.innerHTML||z:z,k=n.find("option[selected]").toArray().map(function(e){return{name:e.innerHTML,val:e.value}}),C=new $;(isNaN(x)||x<=0)&&(x=19921012);var w=J[a];(J[a]=C).values=k,C.config.init=k.concat([]),C.config.name=a,C.config.disabled=r,C.config.max=o,C.config.isSearch=l,C.config.searchUrl=s,C.config.isCreate=c,C.config.radio=d,C.config.skin=f,C.config.direction=u,C.config.height=h,C.config.searchType=g,C.config.formname=v,C.config.layverify=m,C.config.layverType=y,C.config.searchType=g,C.config.showCount=x,C.config.placeholder=b,w&&(X.extend(!0,C.config,w.config),r=C.config.disabled,l=C.config.isSearch,s=C.config.searchUrl,f=C.config.skin,h=C.config.height,o=C.config.max,v=C.config.formname,m=C.config.layverify,y=C.config.layverType,b=C.config.placeholder,d=C.config.radio,w.config.init&&(C.values=w.config.init.map(function(e){return"object"==(void 0===e?"undefined":_typeof(e))?e:{name:n.find('option[value="'+e+'"]').text(),val:e}}).filter(function(e){return e.name}),C.config.init=C.values.concat([]))),i[0]&&i.remove();var S=j.renderSelect(a,b,t),T=X('<div class="'+q+'" '+O+'="'+f+'">\n\t\t\t\t\t<input class="'+U+'" value="" name="'+v+'" lay-verify="'+m+'" lay-verType="'+y+'" type="text" style="position: absolute;bottom: 0; z-index: -1;width: 100%; height: 100%; border: none; opacity: 0;"/>\n\t\t\t\t\t<div class="'+B+" "+(r?P:"")+'">\n\t\t\t\t\t\t<div class="'+I+" "+A+'" '+(h&&"auto"!=h?'style="height: '+h+';"':"")+">\n\t\t\t\t\t\t\t"+(h?['<div class="'+D+'" style="margin-right: '+(l&&0==g?"50px":"10px")+';"></div>','<input type="text" fsw class="'+I+" "+H+'" '+(l?"":'style="display: none;"')+' autocomplete="off" debounce="0" style="position: absolute;right: 10px;top: 3px;"/>']:['<div class="'+D+'">','<input type="text" fsw class="'+I+" "+H+'" '+(l?"":'style="display: none;"')+' autocomplete="off" debounce="0" />',"</div>"]).join("")+'\n\t\t\t\t\t\t\t<i class="'+M+'"></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="'+E+'">\n\t\t\t\t\t\t\t<input type="text" autocomplete="off" placeholder="'+b+'" readonly="readonly" unselectable="on" class="'+I+'">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<dl xid="'+a+'" class="'+V+" "+(d?_:"")+'">'+S+"</dl>\n\t\t\t\t</div>");C.select=w?(X('dl[xid="'+a+'"]').parents("."+L).html(T),n):(n.wrap('<div class="'+L+'" FS_ID="'+a+'"></div>'),n.after(T),n.remove()),l?(Y[a]=X.extend(!0,{},Q,{searchUrl:s}),X(document).on("input propertychange","div."+L+'[FS_ID="'+a+'"] .'+H,function(e){j.search(a,e,s)}),s&&j.triggerSearch(T,!0)):T.find("dl dd."+W).css("display","none")})},e.prototype.search=function(i,e,t,n){var a=this,r=void 0;if(n)r=n;else{r=e.target;var o=e.keyCode;if(9===o||13===o||37===o||38===o||39===o||40===o)return!1}var l=X.trim(r.value);this.changePlaceHolder(X(r));var s=Y[i]?Y[i]:Q;t=s.searchUrl||t;var c=J[i],d=c.config.isCreate,f=X('dl[xid="'+i+'"]').parents("."+q);if(t){if(s.searchVal&&(l=s.searchVal,s.searchVal=""),!s.beforeSearch||s.beforeSearch&&s.beforeSearch instanceof Function&&s.beforeSearch(i,t,l)){var u=s.delay;s.first&&(s.first=!1,u=10),clearTimeout(c.clearid),c.clearid=setTimeout(function(){f.find("dl > *:not(."+x+")").remove(),f.find("dd."+h).addClass(v).text("请求中"),a.ajax(i,t,l,!1,null,!0)},u)}}else f.find("dl ."+p).removeClass(p),f.find("dl dd:not(."+x+")").each(function(e,t){var n=X(t),a=J[i].config.filter||k.filter[i];a&&1==a(i,l,{name:n.find("span").attr("name"),val:n.attr("lay-value")},n.hasClass(y))&&n.addClass(p)}),f.find("dl dt").each(function(e,t){X(t).nextUntil("dt",":not(."+p+")").length||X(t).addClass(p)}),this.create(i,d,l),f.find("dl dd:not(."+x+"):not(."+p+")").length?f.find("dd."+h).removeClass(v):f.find("dd."+h).addClass(v).text("无匹配项")},e.prototype.isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)},e.prototype.triggerSearch=function(e,a){var i=this;(e?[e]:X("."+q).toArray()).forEach(function(e,t){var n=(e=X(e)).find("dl").attr("xid");(n&&J[n]&&J[n].config.isEmpty||a)&&i.search(n,null,null,0==J[n].config.searchType?e.find("."+D+" ."+H):e.find("dl ."+W+" ."+H))})},e.prototype.ajax=function(t,n,a,i,r,o){var l=this,s=X("."+L+' dl[xid="'+t+'"]').parents("."+q);if(s[0]&&n){var c=Y[t]?Y[t]:Q,e=X.extend(!0,{},c.data);e[c.searchName]=a,X.ajax({type:c.type,headers:c.header,url:n,data:"json"==c.dataType?JSON.stringify(e):e,success:function(e){"string"==typeof e&&(e=JSON.parse(e)),c.beforeSuccess&&c.beforeSuccess instanceof Function&&(e=c.beforeSuccess(t,n,a,e)),l.isArray(e)&&(e={code:0,msg:"",data:e}),0!=e.code?s.find("dd."+h).addClass(v).text(e.msg):(s.find("dd."+h).removeClass(v),l.renderData(t,e.data,i,r,o),J[t].config.isEmpty=0==e.data.length),c.success&&c.success instanceof Function&&c.success(t,n,a,e)},error:function(e){s.find("dd[lay-value]:not(."+x+")").remove(),s.find("dd."+h).addClass(v).text("服务异常"),c.error&&c.error instanceof Function&&c.error(t,n,a,e)}})}},e.prototype.renderData=function(r,s,e,c,t){var n=this;if(e){var a=function(){for(var t=[],n=0,o={0:s},l=Y[r]?Y[r]:Q,e=function(){var r=t[n++]=[],e=o;o={},X.each(e,function(i,e){X.each(e,function(e,t){var n={pid:i,name:t[l.keyName],val:t[l.keyVal]};r.push(n);var a=t[l.keyChildren];a&&a.length&&(o[n.val]=a)})})};e(),Object.getOwnPropertyNames(o).length;);var a=X("."+L+' dl[xid="'+r+'"]').parents("."+q),i=['<div class="xm-select-linkage">'];return X.each(t,function(e,t){var a=['<div style="left: '+(c-0)*e+'px;" class="xm-select-linkage-group xm-select-linkage-group'+(e+1)+" "+(0!=e?"xm-select-linkage-hide":"")+'">'];X.each(t,function(e,t){var n='<li title="'+t.name+'" pid="'+t.pid+'" value="'+t.val+'"><span>'+t.name+"</span></li>";a.push(n)}),a.push("</div>"),i=i.concat(a)}),i.push('<div style="clear: both; height: 288px;"></div>'),i.push("</div>"),a.find("dl").html(i.join("")),a.find("."+H).css("display","none"),{v:void 0}}();if("object"===(void 0===a?"undefined":_typeof(a)))return a.v}var i=X("."+L+' dl[xid="'+r+'"]').parents("."+q),o=Y[r]?Y[r]:Q,l=i.find("."+E+" input"),d=[];i.find("dl").html(this.renderSelect(r,l.attr("placeholder")||l.attr("back"),s.map(function(e){return e[o.keySel]&&d.push({name:e[o.keyName],val:e[o.keyVal]}),{innerHTML:e[o.keyName],value:e[o.keyVal],sel:e[o.keySel],disabled:e[o.keyDis],type:e.type,name:e.name}})));var f=i.find("."+D),u=i.find("dl[xid]");if(t){var p=J[r].values;p.forEach(function(e,t){u.find('dd[lay-value="'+e.val+'"]').addClass(m)}),d.forEach(function(e,t){-1==n.indexOf(p,e)&&(n.addLabel(r,f,e),u.find('dd[lay-value="'+e.val+'"]').addClass(m),p.push(e))})}else d.forEach(function(e,t){n.addLabel(r,f,e),u.find('dd[lay-value="'+e.val+'"]').addClass(m)}),J[r].values=d;this.commonHanler(r,f)},e.prototype.create=function(e,t,n){if(t&&n){var a=J[e],i=X('[xid="'+e+'"]'),r=i.find("dd."+x+"."+W),o=null,l=i.find("dd."+u);if(i.find("dd:not(."+x+"):not(."+u+")").each(function(e,t){n==X(t).find("span").attr("name")&&(o=t)}),!o){var s=a.config.create(e,name);l[0]?(l.attr("lay-value",s),l.find("span").text(n),l.removeClass(p)):r.after(X(this.createDD(e,{innerHTML:n,value:s},u+" xm-select-create-long")))}}else X("[xid="+e+"] dd."+u).remove()},e.prototype.createDD=function(e,t,n){var a=X.trim(t.innerHTML),i=J[e].config.template(a,t.value,t.selected,t.disabled);return'<dd lay-value="'+t.value+'" class="'+(t.disabled?y:"")+" "+(n||"")+'">\n\t\t\t\t\t<div class="xm-unselect xm-form-checkbox '+(t.disabled?y:"")+'">\n\t\t\t\t\t\t<i class="xm-icon-yes"></i>\n\t\t\t\t\t\t<span name="'+a+'">'+i+"</span>\n\t\t\t\t\t</div>\n\t\t\t\t</dd>"},e.prototype.createQuickBtn=function(e,t){return'<div class="xm-cz" method="'+e.name+'" title="'+e.name+'" '+(t?'style="margin-right: '+t+'"':"")+'><i class="'+e.icon+'"></i><span>'+e.name+"</span></div>"},e.prototype.renderBtns=function(e,t,n){var a=this,i=[],r=X('dl[xid="'+e+'"]');return i.push('<div class="'+o+'" show="'+t+'" style="max-width: '+(r.prev().width()-54)+'px;">'),X.each(J[e].config.btns,function(e,t){i.push(a.createQuickBtn(t,n))}),i.push("</div>"),i.push(this.createQuickBtn({icon:"iconfont icon-caidan",name:""})),i.join("")},e.prototype.renderSelect=function(n,e,t){var a=this,i=[];return J[n].config.btns.length?(setTimeout(function(){var e=X('dl[xid="'+n+'"]');e.parents("."+q).attr(N,J[n].config.searchType),e.find("."+o).css("max-width",e.prev().width()-54+"px")},10),i.push(['<dd lay-value="" class="'+x+'" style="background-color: #FFF!important;">',this.renderBtns(n,null,"30px"),"</dd>",'<dd lay-value="" class="'+x+" "+W+'" style="background-color: #FFF!important;">','<i class="iconfont icon-sousuo"></i>','<input type="text" class="'+I+" "+H+'" placeholder="请搜索"/>',"</dd>"].join(""))):i.push('<dd lay-value="" class="'+x+'">'+e+"</dd>"),this.isArray(t)?X(t).each(function(e,t){"optgroup"===t.type?i.push("<dt>"+t.name+"</dt>"):i.push(a.createDD(n,t))}):X(t).find("*").each(function(e,t){("option"!=t.tagName.toLowerCase()||0!=e||t.value)&&("optgroup"===t.tagName.toLowerCase()?i.push("<dt>"+t.label+"</dt>"):i.push(a.createDD(n,t)))}),i.push('<dt style="display:none;"> </dt>'),i.push('<dd class="'+x+" "+h+" "+(2===i.length?v:"")+'">没有选项</dd>'),i.join("")},e.prototype.on=function(){var n=this;this.one(),X(document).on("click",function(e){X(e.target).parents("."+B)[0]||(X("."+H).val(""),X("."+L+" dl ."+p).removeClass(p),X("."+L+" dl dd."+v).removeClass(v),X("."+L+" dl dd."+u).remove(),n.triggerSearch(),X.each(J,function(e,t){t.values.length||n.changePlaceHolder(X('div[FS_ID="'+e+'"] .'+D))})),X("."+L+" ."+d).removeClass(d)})},e.prototype.one=function(e){var v=this;X(e||document).off("click").on("click","."+B,function(e){var t=X(e.target),n=t.is(B)?t:t.parents("."+B),a=n.next(),i=a.attr("xid");if(X("dl[xid]").not(a).prev().find("."+H).val(""),X("dl[xid]").not(a).find("dd."+p).removeClass(p),n.hasClass(P))return!1;if(t.is("."+M)||t.is("."+H+"[readonly]"))return v.changeShow(n,!n.parents("."+q).hasClass(d)),!1;if(n.find("."+H+":not(readonly)")[0]){var r=n.find("."+H),o={x:e.pageX,y:e.pageY},l=v.getPosition(n[0]);for(n.width();o.x>l.x;){if(X(document.elementFromPoint(o.x,o.y)).is(r))return r.focus(),v.changeShow(n,!0),!1;o.x-=50}}if(t.is("."+H))return v.changeShow(n,!0),!1;if(t.is('i[fsw="'+A+'"]')){var s={name:t.prev().text(),val:t.parent().attr("value")},c=a.find("dd[lay-value='"+s.val+"']");return c.hasClass(y)||v.handlerLabel(i,c,!1,s),!1}return v.changeShow(n,!n.parents("."+q).hasClass(d)),!1}),X(e||document).find("dl."+V).off("click").on("click",function(e){var t=X(e.target);if(t.is("."+g)||t.parents("."+g)[0]){var n=(t=t.is("li")?t:t.parents("li")).parents(".xm-select-linkage-group"),a=t.parents("dl").attr("xid");n.find(".xm-select-active").removeClass("xm-select-active"),t.addClass("xm-select-active"),n.nextAll(".xm-select-linkage-group").addClass("xm-select-linkage-hide");var i=n.next(".xm-select-linkage-group");if(i.find("li").addClass("xm-select-linkage-hide"),i.find('li[pid="'+t.attr("value")+'"]').removeClass("xm-select-linkage-hide"),i[0]&&0!=i.find("li:not(.xm-select-linkage-hide)").length)i.removeClass("xm-select-linkage-hide");else{var r=[],o=0,l=!t.hasClass("xm-select-this");for(J[a].config.radio&&t.parents(".xm-select-linkage").find(".xm-select-this").removeClass("xm-select-this");r[o++]={name:t.find("span").text(),val:t.attr("value")},(t=t.parents(".xm-select-linkage-group").prev().find('li[value="'+t.attr("pid")+'"]')).length;);r.reverse();var s={name:r.map(function(e){return e.name}).join("/"),val:r.map(function(e){return e.val}).join("/")};v.handlerLabel(a,null,l,s)}return!1}if(t.is("dl"))return!1;if(t.is("dt"))return t.nextUntil("dt").each(function(e,t){(t=X(t)).hasClass(y)||t.hasClass(m)||t.click()}),!1;var c=t.is("dd")?t:t.parents("dd"),d=c.parent("dl").attr("xid");if(c.hasClass(y))return!1;if(c.hasClass(x)){var f=t.is("."+b)?t:t.parents("."+b);if(!f[0])return!1;var u=f.attr("method"),p=J[d].config.btns.filter(function(e){return e.name==u})[0];return p&&p.click&&p.click instanceof Function&&p.click(d,v),!1}var h=!c.hasClass(m);return v.handlerLabel(d,c,h),!1})},e.prototype.linkageAdd=function(e,t){var n=X('dl[xid="'+e+'"]');n.find(".xm-select-active").removeClass("xm-select-active");for(var a=t.val.split("/"),i=void 0,r=void 0,o=0,l=[];i=a[o],(r=n.find(".xm-select-linkage-group"+(o+1)+' li[value="'+i+'"]'))[0]&&l.push(r),o++,r.length&&null!=i;);l.length==a.length&&X.each(l,function(e,t){t.addClass("xm-select-this")})},e.prototype.linkageDel=function(e,t){for(var n=X('dl[xid="'+e+'"]'),a=t.val.split("/"),i=void 0,r=void 0,o=a.length-1;i=a[o],(r=n.find(".xm-select-linkage-group"+(o+1)+' li[value="'+i+'"]')).parent().next().find("li[pid="+i+"].xm-select-this").length||r.removeClass("xm-select-this"),o--,r.length&&null!=i;);},e.prototype.valToName=function(e,t){var a=X('dl[xid="'+e+'"]'),n=(t+"").split("/"),i=[];return X.each(n,function(e,t){var n=a.find(".xm-select-linkage-group"+(e+1)+' li[value="'+t+'"] span').text();i.push(n)}),i.length==n.length?i.join("/"):null},e.prototype.commonHanler=function(e,t){this.changePlaceHolder(t),this.retop(t.parents("."+q)),this.checkHideSpan(e,t),this.calcLeft(e,t),t.parents("."+L).find("."+U).val(J[e].values.map(function(e){return e.val}).join(",")),t.parents("."+B+" ."+A).attr("title",J[e].values.map(function(e){return e.name}).join(","))},e.prototype.initVal=function(e){var l=this,t={};e?t[e]=J[e]:t=J,X.each(t,function(n,e){var t=e.values,a=X('dl[xid="'+n+'"]').parent(),i=a.find("."+D),r=a.find("dl");r.find("dd."+m).removeClass(m);var o=t.concat([]);o.concat([]).forEach(function(e,t){l.addLabel(n,i,e),r.find('dd[lay-value="'+e.val+'"]').addClass(m)}),e.config.radio&&o.length&&t.push(o[o.length-1]),l.commonHanler(n,i)})},e.prototype.handlerLabel=function(e,t,n,a,i){var r=X('[xid="'+e+'"]').prev().find("."+D),o=t&&{name:t.find("span").attr("name"),val:t.attr("lay-value")},l=J[e].values,s=J[e].config.on||k.on[e];a&&(o=a);var c=J[e];if(n&&c.config.max&&c.values.length>=c.config.max){var d=J[e].config.maxTips||k.maxTips[e];d&&d(e,l.concat([]),o,c.max)}else if(!(!i&&s&&s instanceof Function&&0==s(e,l.concat([]),o,n,t&&t.hasClass(y)))){var f=X('dl[xid="'+e+'"]');n?(t&&t[0]?(t.addClass(m),t.removeClass(u)):f.find(".xm-select-linkage")[0]&&this.linkageAdd(e,o),this.addLabel(e,r,o),l.push(o)):(t&&t[0]?t.removeClass(m):f.find(".xm-select-linkage")[0]&&this.linkageDel(e,o),this.delLabel(e,r,o),this.remove(l,o)),r[0]&&(c.config.radio&&this.changeShow(r,!1),r.parents("."+B).prev().removeClass("layui-form-danger"),c.config.clearInput&&r.parents("."+L).find("."+H).val(""),this.commonHanler(e,r))}},e.prototype.addLabel=function(e,t,n){if(n){var a='fsw="'+A+'"',i=[X("<span "+a+' value="'+n.val+'"><font '+a+">"+n.name+"</font></span>"),X("<i "+a+' class="xm-icon-close">×</i>')],r=i[0],o=i[1];r.append(o);var l=J[e];l.config.radio&&(l.values.length=0,X('dl[xid="'+e+'"]').find("dd."+m+':not([lay-value="'+n.val+'"])').removeClass(m),t.find("span").remove()),l.config.height?t.append(r):(t.find("input").css("width","50px"),t.find("input").before(r))}},e.prototype.delLabel=function(e,t,n){n&&t.find('span[value="'+n.val+'"]:first').remove()},e.prototype.calcLeft=function(e,t){if(J[e].config.height){var n=t.find("span:not(.xm-span-hide):last")[0];t.next().css("left",(n?this.getPosition(n).x-this.getPosition(t[0]).x+n.offsetWidth+20:10)+"px")}},e.prototype.checkHideSpan=function(e,n){var a=this,i=n.parents("."+A)[0].offsetHeight+5;n.find("span.xm-span-hide").removeClass("xm-span-hide"),n.find("span[style]").remove();var r=J[e].config.showCount;n.find("span").each(function(e,t){r<=e&&X(t).addClass("xm-span-hide"),(t.offsetHeight+t.offsetTop>i||a.getPosition(t).y+t.offsetHeight>a.getPosition(n[0]).y+n[0].offsetHeight+5)&&X(t).addClass("xm-span-hide")});var t=n.find("span:eq("+r+")");t[0]&&t.before(X('<span style="padding-right: 6px;" fsw="'+A+'"> + '+(n.find("span").length-r)+"</span>"))},e.prototype.retop=function(e){var t=e.find("dl"),n=e.offset().top+e.outerHeight()+5-l.scrollTop(),a=t.outerHeight(),i=e.hasClass("layui-form-selectup")||-1!=t.css("top").indexOf("-")||n+a>l.height()&&a<=n;e=e.find("."+A);var r=J[t.attr("xid")],o=t.parents(".layui-form-pane")[0]&&38<t.prev()[0].clientHeight?14:10;if(r){if("up"==r.config.direction)return void t.css({top:"auto",bottom:"42px"});if("down"==r.direction)return void t.css({top:e[0].offsetTop+e.height()+o+"px",bottom:"auto"})}i?t.css({top:"auto",bottom:"42px"}):t.css({top:e[0].offsetTop+e.height()+o+"px",bottom:"auto"})},e.prototype.changeShow=function(e,t){X(".layui-form-selected").removeClass("layui-form-selected");var n=e.parents("."+q);if(X("."+L+" ."+q).not(n).removeClass(d),t)this.retop(n),n.addClass(d),n.find("."+H).focus(),n.find("dl dd[lay-value]:not(."+x+")").length||n.find("dl ."+h).addClass(v);else{n.removeClass(d),n.find("."+H).val(""),n.find("dl ."+v).removeClass(v),n.find("dl dd."+p).removeClass(p),n.find("dl dd."+u).remove();var a=n.find("dl").attr("xid");a&&J[a]&&J[a].config.isEmpty&&this.triggerSearch(n),this.changePlaceHolder(n.find("."+D))}},e.prototype.changePlaceHolder=function(e){var t=e.parents("."+B);if(t[0]||(t=e.parents("dl").prev()),t[0]){var n=e.parents("."+L).find("dl[xid]").attr("xid");if(J[n]&&J[n].config.height);else{var a=t.find("."+A)[0].clientHeight;t.css("height",(34<a?a+4:a)+"px");var i=t.parents("."+L).parent().prev();i.is(".layui-form-label")&&t.parents(".layui-form-pane")[0]&&(a=36<a?a+4:a,t.css("height",a+"px"),i.css({height:a+2+"px",lineHeight:a-18+"px"}))}var r=t.find("."+E+" input");if(!e.find("span:last")[0]&&!t.find("."+H).val()){var o=r.attr("back");r.removeAttr("back"),r.attr("placeholder",o)}else{var l=r.attr("placeholder");r.removeAttr("placeholder"),r.attr("back",l)}}},e.prototype.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n].val==t||e[n].val==(t?t.val:t)||e[n]==t||JSON.stringify(e[n])==JSON.stringify(t))return n;return-1},e.prototype.remove=function(e,t){var n=this.indexOf(e,t?t.val:t);return-1<n&&(e.splice(n,1),!0)},e.prototype.selectAll=function(a,i,e){var r=this,o=X('[xid="'+a+'"]');o[0]&&(o.find(".xm-select-linkage")[0]||o.find("dd[lay-value]:not(."+x+"):not(."+m+")"+(e?":not(."+y+")":"")).each(function(e,t){var n={name:(t=X(t)).find("span").attr("name"),val:t.attr("lay-value")};r.handlerLabel(a,o.find('dd[lay-value="'+n.val+'"]'),!0,n,!i)}))},e.prototype.removeAll=function(n,a,i){var r=this,o=X('[xid="'+n+'"]');o[0]&&(o.find(".xm-select-linkage")[0]?J[n].values.concat([]).forEach(function(e,t){for(var n=e.val.split("/"),a=void 0,i=void 0,r=0;a=n[r++],(i=o.find(".xm-select-linkage-group"+r+':not(.xm-select-linkage-hide) li[value="'+a+'"]')).click(),i.length&&null!=a;);}):J[n].values.concat([]).forEach(function(e,t){i&&o.find('dd[lay-value="'+e.val+'"]').hasClass(y)||r.handlerLabel(n,o.find('dd[lay-value="'+e.val+'"]'),!1,e,!a)}))},e.prototype.reverse=function(a,i,e){var r=this,o=X('[xid="'+a+'"]');o[0]&&(o.find(".xm-select-linkage")[0]||o.find("dd[lay-value]:not(."+x+")"+(e?":not(."+y+")":"")).each(function(e,t){var n={name:(t=X(t)).find("span").attr("name"),val:t.attr("lay-value")};r.handlerLabel(a,o.find('dd[lay-value="'+n.val+'"]'),!t.hasClass(m),n,!i)}))},e.prototype.skin=function(e){var t=["default","primary","normal","warm","danger"],n=t[Math.floor(Math.random()*t.length)];X('dl[xid="'+e+'"]').parents("."+L).find("."+q).attr("xm-select-skin",n),this.check(e)&&this.commonHanler(e,X('dl[xid="'+e+'"]').parents("."+L).find("."+D))},e.prototype.getPosition=function(e){for(var t=0,n=0;null!=e;)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{x:t,y:n}},e.prototype.onreset=function(){X(document).on("click","[type=reset]",function(e){X(e.target).parents("form").find("."+L+" dl[xid]").each(function(e,t){var n=t.getAttribute("xid"),a=X(t),i=void 0,r={};c.removeAll(n),J[n].config.init.forEach(function(e,t){e&&(!r[e]||J[n].config.repeat)&&(i=a.find('dd[lay-value="'+e.val+'"]'))[0]&&(c.handlerLabel(n,i,!0),r[e]=1)})})})},e.prototype.bindEvent=function(n,e,a){e&&e instanceof Function&&(a=e,e=null),a&&a instanceof Function&&(e?J[e]?J[e].config[n]=a:k[n][e]=a:X.each(J,function(e,t){J[e]?J[e].config[n]=a:k[n][e]=a}))},e.prototype.check=function(e){return!!X('dl[xid="'+e+'"]').length||(delete J[e],!1)},e.prototype.render=function(e,t){this.check(e)&&(t=J[e].select),c.init(t),c.one(X('dl[xid="'+e+'"]').parents("."+L)),c.initVal(e)};var t=function(){this.v="4.0.0.0704"},c=new e;return t.prototype.value=function(a,e,t){if("string"!=typeof a)return[];var i=J[a];if(!c.check(a))return[];if("string"==typeof e||null==e){var n=i.values.concat([])||[];return"val"==e?n.map(function(e){return e.val}):"valStr"==e?n.map(function(e){return e.val}).join(","):"name"==e?n.map(function(e){return e.name}):"nameStr"==e?n.map(function(e){return e.name}).join(","):n}if(c.isArray(e)){var r=X('[xid="'+a+'"]'),o={},l=void 0,s=!0;0==t?s=!1:1==t?s=!0:c.removeAll(a),s&&i.values.forEach(function(e,t){o[e.val]=1}),e.forEach(function(e,t){if(e&&(!o[e]||i.config.repeat))if((l=r.find('dd[lay-value="'+e+'"]'))[0])c.handlerLabel(a,l,s,null,!0),o[e]=1;else{var n=c.valToName(a,e);n&&(c.handlerLabel(a,l,s,{name:n,val:e},!0),o[e]=1)}})}},t.prototype.on=function(e,t){return c.bindEvent("on",e,t),this},t.prototype.filter=function(e,t){return c.bindEvent("filter",e,t),this},t.prototype.maxTips=function(e,t){return c.bindEvent("maxTips",e,t),this},t.prototype.config=function(e,n,t){return e&&"object"==(void 0===e?"undefined":_typeof(e))&&(t=1==n,n=e,e=null),n&&"object"==(void 0===n?"undefined":_typeof(n))&&(t&&(n.header||(n.header={}),n.header["Content-Type"]="application/json; charset=UTF-8",n.dataType="json"),e?(Y[e]=X.extend(!0,{},Y[e]||Q,n),!c.check(e)&&this.render(e),J[e]&&(J[e].config.direction=n.direction),n.searchUrl&&J[e]&&c.triggerSearch(X("."+L+' dl[xid="'+e+'"]').parents("."+q),!0)):(X.extend(!0,Q,n),X.each(Y,function(e,t){X.extend(!0,t,n)}))),this},t.prototype.render=function(e,t){var n=this;e&&"object"==(void 0===e?"undefined":_typeof(e))&&(t=e,e=null);var a={};e?c.check(e)&&(a[e]=J[e]):a=J;var i=t?{init:t.init,disabled:t.disabled,max:t.max,isSearch:t.isSearch,isCreate:t.isCreate,radio:t.radio,skin:t.skin,direction:t.direction,height:t.height,formname:t.formname,layverify:t.layverify,layverType:t.layverType,searchType:t.searchType,showCount:t.showCount,placeholder:t.placeholder,create:t.create,filter:t.filter,maxTips:t.maxTips,on:t.on,template:t.template}:{};return Object.getOwnPropertyNames(a).length&&X.each(a,function(e,t){c.check(e)&&(n.value(e,[]),X.extend(J[e].config,i),c.render(e,t.select))}),(X("select["+A+'="'+e+'"]')[0]?X("select["+A+'="'+e+'"]'):X("select["+A+"]")).each(function(e,t){var n=t.getAttribute(A);c.render(n,t)}),this},t.prototype.disabled=function(e){var t={};return e?c.check(e)&&(t[e]=J[e]):t={},X.each(t,function(e,t){X('dl[xid="'+e+'"]').prev().addClass(P)}),this},t.prototype.undisabled=function(e){var t={};return e?c.check(e)&&(t[e]=J[e]):t={},X.each(t,function(e,t){X('dl[xid="'+e+'"]').prev().removeClass(P)}),this},t.prototype.data=function(e,t,n){return e&&t&&n&&(!c.check(e)&&this.render(e),this.value(e,[]),this.config(e,n),"local"==t?c.renderData(e,n.arr,1==n.linkage,n.linkageWidth?n.linkageWidth:"100"):"server"==t&&c.ajax(e,n.url,n.keyword,1==n.linkage,n.linkageWidth?n.linkageWidth:"100")),this},t.prototype.btns=function(e,l,s){if(!l||!c.isArray(l))return this;var t={};return e?c.check(e)&&(t[e]=J[e]):t={},l=l.map(function(e){if("string"==typeof e){if("select"==e)return n[0];if("remove"==e)return n[1];if("reverse"==e)return n[2];if("skin"==e)return n[3]}return e}),X.each(t,function(e,t){t.config.btns=l;var n=X('dl[xid="'+e+'"]').find("."+x+":first");if(l.length){var a=s&&s.show&&("name"==s.show||"icon"==s.show)?s.show:"",i=c.renderBtns(e,a,s&&s.space?s.space:"30px");n.html(i)}else{var r=n.parents("."+q).find("."+E+" input"),o=r.attr("placeholder")||r.attr("back");n.html(o),n.removeAttr("style")}}),this},t.prototype.search=function(e,t){return e&&c.check(e)&&(Y[e]=X.extend(!0,{},Y[e]||Q,{first:!0,searchVal:t}),c.triggerSearch(X('dl[xid="'+e+'"]').parents("."+q),!0)),this},new t});